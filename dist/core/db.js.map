{"version":3,"sources":["../../src/core/db.js"],"names":["sqlDb","require","settings","exports","executeSql","sql","callback","conn","Connection","dbConfig","connect","then","req","Request","query","recordset","catch","err","console","log","executeSqlWithConnection","connection"],"mappings":";;AAAA,IAAIA,QAAQC,QAAQ,OAAR,CAAZ;AACA,IAAIC,WAAWD,QAAQ,aAAR,CAAf;;AAEA;AACA;AACA;AACAE,QAAQC,UAAR,GAAqB,UAASC,GAAT,EAAcC,QAAd,EAAuB;AACxC,QAAIC,OAAO,IAAIP,MAAMQ,UAAV,CAAqBN,SAASO,QAA9B,CAAX;AACAF,SAAKG,OAAL,GACKC,IADL,CACU,YAAU;AACZ,YAAIC,MAAM,IAAIZ,MAAMa,OAAV,CAAkBN,IAAlB,CAAV;AACAK,YAAIE,KAAJ,CAAUT,GAAV,EAAeM,IAAf,CAAoB,UAASI,SAAT,EAAoB;AACpCT,qBAASS,SAAT;AACH,SAFD,EAGCC,KAHD,CAGO,UAASC,GAAT,EAAa;AAChBC,oBAAQC,GAAR,CAAYF,GAAZ;AACAX,qBAAS,IAAT,EAAeW,GAAf;AACH,SAND;AAOH,KAVL,EAWKD,KAXL,CAWW,UAASC,GAAT,EAAa;AAChBC,gBAAQC,GAAR,CAAYF,GAAZ;AACAX,iBAAS,IAAT,EAAeW,GAAf;AACH,KAdL;AAeH,CAjBD;;AAmBAd,QAAQiB,wBAAR,GAAmC,UAASC,UAAT,EAAqBhB,GAArB,EAA0BC,QAA1B,EAAmC;AAClE,QAAIC,OAAO,IAAIP,MAAMQ,UAAV,CAAqBa,UAArB,CAAX;AACAd,SAAKG,OAAL,GACKC,IADL,CACU,YAAU;AACZ,YAAIC,MAAM,IAAIZ,MAAMa,OAAV,CAAkBN,IAAlB,CAAV;AACAK,YAAIE,KAAJ,CAAUT,GAAV,EAAeM,IAAf,CAAoB,UAASI,SAAT,EAAoB;AACpCT,qBAASS,SAAT;AACH,SAFD,EAGCC,KAHD,CAGO,UAASC,GAAT,EAAa;AAChBC,oBAAQC,GAAR,CAAYF,GAAZ;AACAX,qBAAS,IAAT,EAAeW,GAAf;AACH,SAND;AAOH,KAVL,EAWKD,KAXL,CAWW,UAASC,GAAT,EAAa;AAChBC,gBAAQC,GAAR,CAAYF,GAAZ;AACAX,iBAAS,IAAT,EAAeW,GAAf;AACH,KAdL;AAeH,CAjBD","file":"db.js","sourcesContent":["var sqlDb = require('mssql');\nvar settings = require('../settings');\n\n// ---------------------------------------------------------\n// Execute to sql server.\n// ---------------------------------------------------------\nexports.executeSql = function(sql, callback){\n    var conn = new sqlDb.Connection(settings.dbConfig);\n    conn.connect()\n        .then(function(){\n            var req = new sqlDb.Request(conn);\n            req.query(sql).then(function(recordset) {\n                callback(recordset);\n            })\n            .catch(function(err){\n                console.log(err);\n                callback(null, err);\n            });\n        })\n        .catch(function(err){\n            console.log(err);\n            callback(null, err);\n        });\n};\n\nexports.executeSqlWithConnection = function(connection, sql, callback){\n    var conn = new sqlDb.Connection(connection);\n    conn.connect()\n        .then(function(){\n            var req = new sqlDb.Request(conn);\n            req.query(sql).then(function(recordset) {\n                callback(recordset);\n            })\n            .catch(function(err){\n                console.log(err);\n                callback(null, err);\n            });\n        })\n        .catch(function(err){\n            console.log(err);\n            callback(null, err);\n        });\n};"]}