{"version":3,"sources":["../../src/controller/order.js"],"names":["squel","require","httpMsg","helper","settings","exports","get","req","resp","orderno","Error","sql","select","from","field","where","expr","or","toString","execCommandWithConnection","db2Config","ex","show500"],"mappings":";;AAAA,IAAIA,QAAQC,QAAQ,OAAR,CAAZ;AACA,IAAIC,UAAUD,QAAQ,iBAAR,CAAd;AACA,IAAIE,SAASF,QAAQ,gBAAR,CAAb;AACA,IAAIG,WAAWH,QAAQ,aAAR,CAAf;;AAEAI,QAAQC,GAAR,GAAc,UAASC,GAAT,EAAcC,IAAd,EAAoBC,OAApB,EAA6B;;AAEzC,MAAI;;AAEF,QAAI,CAACA,OAAL,EAAc,MAAM,IAAIC,KAAJ,CAAU,iBAAV,CAAN;;AAEd,QAAIC,MAAMX,MAAMY,MAAN,GACDC,IADC,CACI,OADJ,EAEDC,KAFC,CAEK,6GAFL,EAGDA,KAHC,CAGK,gBAHL,EAIDA,KAJC,CAIK,2BAJL,EAKDA,KALC,CAKK,mCALL,EAMDA,KANC,CAMK,yCANL,EAODA,KAPC,CAOK,yCAPL,EAQDA,KARC,CAQK,sCARL,EASDA,KATC,CASK,yBATL,EAUDA,KAVC,CAUK,wBAVL,EAWDA,KAXC,CAWK,uCAXL,EAYDA,KAZC,CAYK,gEAZL,EAaDA,KAbC,CAaK,6CAbL,EAcDA,KAdC,CAcK,6CAdL,EAeDA,KAfC,CAeK,8DAfL,EAgBDA,KAhBC,CAgBK,uCAhBL,EAiBDA,KAjBC,CAiBK,gFAjBL,EAkBDC,KAlBC,CAmBAf,MAAMgB,IAAN,GACGC,EADH,CACM,eADN,EACuBR,OADvB,EAEGQ,EAFH,CAEM,WAFN,EAEmBR,OAFnB,EAGGQ,EAHH,CAGM,WAHN,EAGmBR,OAHnB,EAIGQ,EAJH,CAIM,UAJN,EAIkBR,OAJlB,EAKGQ,EALH,CAKM,iBALN,EAKyBR,OALzB,CAnBA,EA0BDS,QA1BC,EAAV;;AA4BAf,WAAOgB,yBAAP,CAAiCZ,GAAjC,EAAsCC,IAAtC,EAA4CG,GAA5C,EAAiDP,SAASgB,SAA1D;AAED,GAlCD,CAkCC,OAAMC,EAAN,EAAU;AACTnB,YAAQoB,OAAR,CAAgBf,GAAhB,EAAqBC,IAArB,EAA2Ba,EAA3B;AACD;AAEF,CAxCD","file":"order.js","sourcesContent":["var squel = require('squel');\nvar httpMsg = require('../core/httpMsg');\nvar helper = require('../core/helper');\nvar settings = require('../settings');\n\nexports.get = function(req, resp, orderno) {\n  \n  try {\n    \n    if (!orderno) throw new Error(\"Input not valid\");\n\n    var sql = squel.select()\n            .from(\"SEBL1\")\n            .field(\"ISNULL((SELECT TOP 1 VatRegistrationNo FROM slcu1 WHERE slcu1.CustomerCode=SEBL1.CustomerCode),'') AS TaxNo\")\n            .field(\"'' AS BranchNo\")\n            .field(\"ISNULL(JobNo,'') AS JobNo\")\n            .field(\"ISNULL(BookingNo,'') AS BookingNo\")\n            .field(\"ISNULL(CustomerCode,'') AS CustomerCode\")\n            .field(\"ISNULL(CustomerName,'') AS CustomerName\")\n            .field(\"ISNULL(UcrNo,'') AS CarrierBookingNo\")\n            .field(\"ISNULL(OBLNo,'') AS OBL\")\n            .field(\"ISNULL(BLNo,'') AS HBL\")\n            .field(\"ISNULL(MasterJobNo,'') AS MasterJobNo\")\n            .field(\"ISNULL(EtdDate, CONVERT(DATE,'19000101',112)) AS DepartureDate\")\n            .field(\"ISNULL(MotherVesselName,'') AS MotherVessel\")\n            .field(\"ISNULL(FeederVesselName,'') AS FeederVessel\")\n            .field(\"ISNULL(EtaDate, CONVERT(DATE,'19000101',112)) AS ArrivalDate\")\n            .field(\"ISNULL(ContainerNo,'') AS ContainerNo\")\n            .field(\"ISNULL(DeliveryOrderReleaseDate, CONVERT(DATE,'19000101',112)) AS DeliveryDate\")\n            .where(\n              squel.expr()\n                .or(\"BookingNo = ?\", orderno)\n                .or(\"UcrNo = ?\", orderno)\n                .or(\"OBLNo = ?\", orderno)\n                .or(\"BLNo = ?\", orderno)\n                .or(\"MasterJobNo = ?\", orderno)\n            )\n            .toString();\n           \n    helper.execCommandWithConnection(req, resp, sql, settings.db2Config);\n\n  }catch(ex) {\n    httpMsg.show500(req, resp, ex);\n  }\n\n}"]}